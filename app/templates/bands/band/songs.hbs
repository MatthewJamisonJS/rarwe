{{page-title @model.name "songs | Rock & Roll with Octane" replace=true}}

{{#if @model.songs.length}}
  <ul>
    {{#each @model.songs as |song|}}
      {{! When we now create a new song, it doesn't appear in the list.
      The song is added to this.model.songs where the model is a Band object }}
      {{! However, the songs property is not tracked so Ember's templating engine doesn't re-render the @model.songs
      chunk in the template
      We fix this by tracking songs in the parent directory bands }}
      <li class="mb-2">
        {{song.title}}
        <span class="float-right">
          <StarRating @rating={{song.rating}} @onUpdate={{set song "rating"}} />
        </span>
      </li>
    {{/each}}
  </ul>
{{else}}
  <p class="text-center">
    The band has no songs yet.
  </p>
{{/if}}
{{#if this.showAddSong}}
  <div class="flex justify-center mt-2">
    <button
      type="button"
      class="px-4 py-2 rounded bg-purple-600 shadow-md hover:shadow-lg hover:text-white hover:bg-purple-500 focus:outline-none"
      {{on "click" (set this "showAddSong" false)}}
    >
      Add song
    </button>
  </div>
{{else}}
  <div class="mt-6 flex">
    <label for="title" class="sr-only">Title</label>
    <input
      type="text"
      id="title"
      class="text-gray-800 bg-white rounded-md py-2 px-4"
      placeholder="Title"
      value={{this.title}}
      {{on "input" this.updateTitle}}
    />
    <button
      type="button"
      class="ml-4 px-4 py-2 rounded bg-purple-600 shadow-md hover:shadow-lg hover:text-white
        {{if this.hasNoTitle 'bg-purple-500' 'bg-purple-600'}}"
      disabled={{this.hasNoTitle}}
      {{on "click" this.saveSong}}
    >
      Save
    </button>
    <button
      type="button"
      class="ml-2 px-4 p-2 rounded bg-white border border-bg-purple-600 shadow-md text-purple-600 hover:shadow-lg"
    >
      Cancel
    </button>
  </div>
{{/if}}

{{! <StarRating> is a component invocation. Component arguments need to be prefixed with @
upon calling: @rating and @onUpdate are the arguments we're passing in. }}

{{! The set in {{set song "rating"}}
{{!is again a helper, implemented by the ember-set-helper add-on. So is fn }}